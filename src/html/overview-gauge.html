<html>
    <head>
        <meta charset="UTF-8">
        <script src="/static/circletype.min.js"></script>
        <script src="/static/gauge.min.js"></script>
        <script src="/static/jquery.min.js"></script>
        <style>
            .wrapper {
                position: relative;
                display: inline-block;
                margin-bottom:-27px;
            }

            .text {
                position: absolute;
                text-align: center;
                width: 100%;
                line-height: 150px;
                top: 30px;
                font-family: tahoma;
                font-weight: 800;
                color: white;
            }
            
            canvas {
                position: relative;
                z-index: -99;
            }

            body {
                background-color: rgba(255,255,255,0);
                margin: 0px;
            }
        </style>
    </head>
    <body>
        <div id="power" class="wrapper">
            <div id="power-label" class="text">Power Zone</div>
            <canvas width="380" height="150" id="power-gauge-canvas"></canvas>
        </div>
        <div id="hr" class="wrapper" style="transform: rotate(180deg) scaleX(-1);">
            <div id="power-label" class="text" style="transform: rotate(180deg) scaleX(-1);">HR Zone</div>        
            <canvas width="380" height="150" id="hr-gauge-canvas"></canvas>
        </div>
    </body>

    <script>
        var powerOpts = {
            angle: 0, /// The span of the gauge arc
            lineWidth: 0.44, // The line thickness
            pointer: {
                length: 0.6, // Relative to gauge radius
                strokeWidth: 0.035 // The thickness
            },
            colorStart: '#6FADCF',
            colorStop: '#8FC0DA',
            strokeColor: '#E0E0E0',
            staticZones: [
                {strokeStyle: "#30B32D", min: 0, max: 165}, //Green
                {strokeStyle: "#FFDD00", min: 166, max: 224}, // Yellow
                {strokeStyle: "#FFA500", min: 225, max: 268}, // Orange
                {strokeStyle: "#FF4500", min: 269, max: 313},  // Orange Red
                {strokeStyle: "#F03E3E", min: 314, max: 356},  // Red
                {strokeStyle: "#8B0000", min: 357, max: 400},  // Red
                {strokeStyle: "#800000", min: 400, max: 450}  // Maroon
            ],
        };

        var power = document.getElementById('power-gauge-canvas'); // your canvas element
        var powerGauge = new Gauge(power).setOptions(powerOpts); // create sexy gauge!
        powerGauge.maxValue = 450; // set max gauge value
        powerGauge.setMinValue(0);  // set min value
        powerGauge.animationSpeed = 10;
        powerGauge.set(0); // set actual value

        // ---------------------------------------

        var hrOpts = {
            angle: 0, /// The span of the gauge arc
            lineWidth: 0.44, // The line thickness
            pointer: {
                length: 0.6, // Relative to gauge radius
                strokeWidth: 0.035 // The thickness
            },
            colorStart: '#6FADCF',
            colorStop: '#8FC0DA',
            strokeColor: '#E0E0E0',
            staticZones: [
                {strokeStyle: "#30B32D", min: 0, max: 126}, //Green
                {strokeStyle: "#FFDD00", min: 127, max: 144}, // Yellow
                {strokeStyle: "#FFA500", min: 145, max: 162}, // Orange
                {strokeStyle: "#FF4500", min: 163, max: 180},  // Orange Red
                {strokeStyle: "#F03E3E", min: 181, max: 205},  // Red
                {strokeStyle: "#800000", min: 206, max: 250}  // Maroon
            ],
        };

        var hr = document.getElementById('hr-gauge-canvas'); // your canvas element
        var hrGauge = new Gauge(hr).setOptions(hrOpts); // create sexy gauge!
        hrGauge.maxValue = 250; // set max gauge value
        hrGauge.setMinValue(0);  // set min value
        hrGauge.animationSpeed = 10;
        hrGauge.set(0); // set actual value

        // ---------------------------------------

        window.setInterval(function() { RefreshData(); }, 500);

        function RefreshData()
        {
            $.ajax({
                type: "GET",
                url: "/power/?dataOnly=true",
                async: true,
                success: function(result) { powerGauge.set(result);},
                error: function() { powerGauge.set(0);},
            });

            $.ajax({
                type: "GET",
                url: "/hr/?dataOnly=true",
                async: true,
                success: function(result) { hrGauge.set(result);},
                error: function() { hrGauge.set(0);},
            });
        }
    </script>
</html>